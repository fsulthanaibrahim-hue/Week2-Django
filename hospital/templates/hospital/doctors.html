{% extends "hospital/base.html" %}

{% block content %}
<div style="text-align:center; margin:30px 0;">
    <h2>Our Doctors</h2>

    <!-- SEARCH FORM -->
    <input type="text" id="search-input" placeholder="Search by doctor or department"
           style="
               padding:10px 15px;
               width:300px;
               border-radius:6px;
               border:1px solid #ccc;
               font-size:14px;
               margin-bottom:30px;
           ">
</div>

<!-- DOCTOR CARDS -->
<div id="doctors-container" style="display:flex; flex-wrap:wrap; gap:25px; justify-content:center;">
    {% for doctor in doctors %}
        <div class="doctor-card" style="
            width:260px;
            background:#fff;
            padding:20px;
            border-radius:12px;
            box-shadow:0 6px 18px rgba(0,0,0,0.1);
            text-align:center;
        ">
            <h3>{{ doctor.name }} üë®‚Äç‚öïÔ∏è</h3>

            <p style="color:#1977cc; font-weight:600;">
                {{ doctor.department.name }}
            </p>

            <a href="{% url 'department_doctors' doctor.department.id %}"
               style="text-decoration:none; color:#1977cc; font-weight:500;">
                View Department Doctors
            </a>
        </div>
    {% endfor %}
</div>

<script>
// Get input and container
const searchInput = document.getElementById('search-input');
const doctorsContainer = document.getElementById('doctors-container');

// Add event listener
searchInput.addEventListener('input', function() {
    const query = this.value.toLowerCase();
    const cards = document.querySelectorAll('.doctor-card');

    cards.forEach(card => {
        const name = card.querySelector('h3').innerText.toLowerCase();
        const dept = card.querySelector('p').innerText.toLowerCase();

        if (name.includes(query) || dept.includes(query)) {
            card.style.display = 'block';
        } else {
            card.style.display = 'none';
        }
    });
});
</script>
{% endblock %}
